(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bd12821"],{"99af":function(t,a,i){"use strict";var n=i("23e7"),s=i("d039"),e=i("e8b5"),c=i("861d"),r=i("7b0b"),o=i("50c4"),u=i("8418"),d=i("65f0"),l=i("1dde"),p=i("b622"),h=i("2d00"),f=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",b=h>=51||!s((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=l("concat"),C=function(t){if(!c(t))return!1;var a=t[f];return void 0!==a?!!a:e(t)},m=!b||!y;n({target:"Array",proto:!0,forced:m},{concat:function(t){var a,i,n,s,e,c=r(this),l=d(c,0),p=0;for(a=-1,n=arguments.length;a<n;a++)if(e=-1===a?c:arguments[a],C(e)){if(s=o(e.length),p+s>g)throw TypeError(v);for(i=0;i<s;i++,p++)i in e&&u(l,p,e[i])}else{if(p>=g)throw TypeError(v);u(l,p++,e)}return l.length=p,l}})},eed1:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container py-3"},[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),i("div",{staticClass:"body"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"text-right mb-3"},[i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeAllCartItem()}}},[i("i",{staticClass:"far fa-trash-alt"},[t._v(" 刪除所有品項")])])]),i("table",{staticClass:"table table-hover"},[t._m(1),t.cartProducts.length?i("tbody",t._l(t.cartProducts,(function(a){return i("tr",{key:a.id},[i("td",{staticClass:"align-middle"},[i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(i){return t.removeCartItem(a.product)}}},[i("i",{staticClass:"far fa-trash-alt"})])]),i("td",{staticClass:"align-middle"},[i("a",{attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),t.$router.push("/product/"+a.product.id)}}},[i("img",{attrs:{height:"50",src:a.product.imageUrl[0],alt:""}})])]),i("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),i("td",{staticClass:"align-middle"},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-group-prepend"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(i){return t.quantityUpdata(a.product.id,a.quantity+1)}}},[t._v(" + ")])]),i("input",{staticClass:"form-control text-center",attrs:{id:"inlineFormInputGroupUsername",type:"text"},domProps:{value:a.quantity},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.quantityUpdata(a.product.id,i.target.value)}}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(i){return t.quantityUpdata(a.product.id,a.quantity-1)}}},[t._v(" - ")])])])]),i("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.unit)+" ")]),i("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(a.product.price*a.quantity))+" ")])])})),0):t._e()]),i("hr"),i("div",{staticClass:"d-flex justify-content-end"},[t.cartTotal<1e3?i("p",[t._v("共 "+t._s(t.quantity)+" 件商品 / 運費(1000免運): NT $60")]):i("p",[t._v("共 "+t._s(t.quantity)+" 件商品 / 運費(1000免運): NT $0")])]),i("div",{staticClass:"d-flex justify-content-end"},[t.cartTotal<1e3?i("p",[t._v("商品金額總計: "),i("strong",{staticClass:"text-danger"},[t._v(" NT "+t._s(t._f("currency")(t.cartTotal+60))+" ")])]):i("p",[t._v("商品金額總計:"),i("strong",{staticClass:"text-danger"},[t._v(" NT "+t._s(t._f("currency")(t.cartTotal))+" ")])])])])]),i("div",{staticClass:"modal-footer d-flex justify-content-center"},[i("button",{staticClass:"w-25 badge-light2 btn btn-light",attrs:{type:"button"},on:{click:function(a){return t.$router.push("/products")}}},[i("i",{staticClass:"returnIcon fas fa-angle-left"}),t._v("繼續購物")]),i("button",{staticClass:"w-25 badge-secondary btn btn-dark",attrs:{type:"button",disabled:0===t.cartTotal},on:{click:function(a){return t.orderForm()}}},[t._v(" 確認訂購"),i("i",{staticClass:"returnIcon fas fa-angle-right"})])])],1)},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"header"},[i("h5",{staticClass:"title"},[t._v("購物車")]),i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("刪除")]),i("th",{attrs:{scope:"col"}}),i("th",{attrs:{scope:"col"}},[t._v("品名")]),i("th",{attrs:{scope:"col",width:"150px"}},[t._v("數量")]),i("th",{attrs:{scope:"col"}},[t._v("單位")]),i("th",{attrs:{scope:"col"}},[t._v("金額")])])])}],e=(i("99af"),i("4160"),i("159b"),{data:function(){return{isLoading:!1,quantity:0,cartProducts:{},cartTotal:0,uuid:"7f1638b3-f468-4c9d-a7b1-49b0ae75cd3d",path:"https://course-ec-api.hexschool.io/api/"}},methods:{removeCartItem:function(t){var a=this;this.isLoading=!0;var i="".concat(this.path).concat(this.uuid,"/ec/shopping/").concat(t.id);this.$http.delete(i).then((function(){a.isLoading=!1,a.getCartList(),a.$bus.$emit("get-cart")})).catch((function(t){a.isLoading=!1,console.log(t)}))},removeAllCartItem:function(){var t=this;this.isLoading=!0,this.cartProducts=[],this.cartTotal=0;var a="".concat(this.path).concat(this.uuid,"/ec/shopping/all/product");this.$http.delete(a).then((function(){t.isLoading=!1,t.getCartList(),t.$bus.$emit("get-cart")})).catch((function(a){t.isLoading=!1,console.log(a)})),this.quantity=0},quantityUpdata:function(t,a){var i=this;this.isLoading=!0;var n="".concat(this.path).concat(this.uuid,"/ec/shopping"),s={product:t,quantity:a};this.$http.patch(n,s).then((function(){i.isLoading=!1,i.getCartList(),i.$bus.$emit("get-cart")}))},getCartList:function(){var t=this;this.isLoading=!0;var a="".concat(this.path).concat(this.uuid,"/ec/shopping");this.$http.get(a).then((function(a){t.cartProducts=a.data.data,t.isLoading=!1,t.cartTotal=0,t.quantity=0,t.cartProducts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity,t.quantity+=a.quantity}))})).catch((function(a){t.isLoading=!1,t.$bus.$emit("message:push","購物車載入失敗，".concat(a),"danger")}))}},created:function(){this.getCartList()}}),c=e,r=i("2877"),o=Object(r["a"])(c,n,s,!1,null,null,null);a["default"]=o.exports}}]);
//# sourceMappingURL=chunk-1bd12821.6179f1e2.js.map