{"version":3,"sources":["webpack:///./src/views/dashboard/Dashboard.vue?62ca","webpack:///src/views/dashboard/Dashboard.vue","webpack:///./src/views/dashboard/Dashboard.vue?b186","webpack:///./src/views/dashboard/Dashboard.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","_v","_m","preventDefault","signOut","token","_e","staticRenderFns","data","uuid","api","checkSuccess","methods","$http","post","url","document","cookie","check","response","success","path","created","replace","defaults","headers","common","Authorization","component"],"mappings":"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","file":"js/chunk-2d0d32d2.7929902d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('nav',{staticClass:\"navbar sticky-top navbar-expand-lg navbar-light bg-light\"},[_c('router-link',{staticClass:\"navbar-brand\",attrs:{\"to\":\"/admin\"}},[_vm._v(\"後台管理頁面\")]),_vm._m(0),_c('div',{staticClass:\"collapse navbar-collapse\",attrs:{\"id\":\"navbarSupportedContent\"}},[_c('ul',{staticClass:\"navbar-nav mr-auto\"},[_c('li',{staticClass:\"nav-item active\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/products\"}},[_vm._v(\"產品列表\")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/coupons\"}},[_vm._v(\"優惠券列表\")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/storages\"}},[_vm._v(\"圖片列表\")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/orders\"}},[_vm._v(\"訂單列表\")])],1),_c('li',{staticClass:\"nav-item\"},[_c('router-link',{staticClass:\"nav-link\",attrs:{\"to\":\"/admin/customer_order\"}},[_vm._v(\"模擬下單系統\")])],1)]),_c('span',{staticClass:\"navbar-text\"},[_c('router-link',{staticClass:\"nav-link text-info \",attrs:{\"to\":\"/\"}},[_vm._v(\"登入前台\")])],1),_c('span',{staticClass:\"navbar-text\"},[_c('a',{staticClass:\"nav-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.signOut($event)}}},[_vm._v(\"登出\")])])])],1),(_vm.checkSuccess)?_c('router-view',{attrs:{\"token\":_vm.token}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"navbar-toggler\",attrs:{\"type\":\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarSupportedContent\",\"aria-controls\":\"navbarSupportedContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"}},[_c('span',{staticClass:\"navbar-toggler-icon\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <loading :active.sync=\"isLoading\"></loading>\n    <nav class=\"navbar sticky-top navbar-expand-lg navbar-light bg-light\">\n            <router-link to=\"/admin\" class=\"navbar-brand\">後台管理頁面</router-link>\n            <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n        <li class=\"nav-item active\">\n            <router-link to=\"/admin/products\" class=\"nav-link\">產品列表</router-link>\n            <!-- <a class=\"nav-link\" href=\"#\">Home <span class=\"sr-only\">(current)</span></a> -->\n        </li>\n        <li class=\"nav-item\">\n            <router-link to='/admin/coupons' class=\"nav-link\">優惠券列表</router-link>\n        </li>\n        <li class=\"nav-item\">\n            <router-link to='/admin/storages' class=\"nav-link\">圖片列表</router-link>\n        </li>\n        <li class=\"nav-item\">\n            <router-link to='/admin/orders' class=\"nav-link\">訂單列表</router-link>\n        </li>\n        <li class=\"nav-item\">\n            <router-link to='/admin/customer_order' class=\"nav-link\">模擬下單系統</router-link>\n        </li>\n        </ul>\n        <span class=\"navbar-text\">\n          <router-link to='/' class=\"nav-link text-info \">登入前台</router-link>\n        </span>\n        <span class=\"navbar-text\">\n          <a class=\"nav-link\" href=\"#\" @click.prevent=\"signOut\">登出</a>\n        </span>\n    </div>\n  </nav>\n        <router-view v-if=\"checkSuccess\" :token=\"token\"/>\n</div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      token: '',\n      uuid: process.env.VUE_APP_UUID,\n      api: process.env.VUE_APP_APIPATH,\n      checkSuccess: false,\n      isLoading: false,\n    };\n  },\n  methods: {\n    signOut() {\n      // this.$cookies.remove('token');\n      // this.$router.push('/login');\n\n      // this.$bus.$emit('message:push',\n      //   '登出成功',\n      //   'success');\n\n      this.isLoading = true;\n      const url = `${this.api}auth/logout`;\n      this.$http.post(url, { api_token: this.token }).then(() => {\n        this.token = '';\n        document.cookie = 'hexToken=;expires=;';\n        this.$bus.$emit(\n          'message:push',\n          `成功登出 ${this.token}!!`,\n          'success',\n        );\n        this.isLoading = false;\n        this.$router.push('/login');\n      }).catch((error) => {\n        this.isLoading = false;\n        // console.log(error);\n        this.$bus.$emit(\n          'message:push',\n          `出失敗惹，${error}`,\n          'danger',\n        );\n      });\n    },\n\n    check() {\n      const url = `${this.api}auth/check`;\n      this.$http.post(url, { api_token: this.token }).then((response) => {\n        if (!response.data.success) {\n          this.$router.push({\n            path: 'login',\n          });\n        }\n        this.checkSuccess = true;\n      });\n    },\n  },\n  created() {\n    this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    // Axios 預設值\n    this.$http.defaults.headers.common.Authorization = `Bearer ${this.token}`;\n    this.check();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=0fbcd3d0&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}