(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-753b141c"],{1799:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},[s("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.pages.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a){return s("li",{key:a,staticClass:"page-item",class:{active:t.pages.current_page===a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.updatePage(a)}}},[t._v(t._s(a))])])})),s("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.pages.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],n={data:function(){return{}},props:{pages:{}},methods:{updatePage:function(t){this.$emit("emitPage",t)}}},o=n,r=s("2877"),c=Object(r["a"])(o,e,i,!1,null,null,null);a["a"]=c.exports},"729c":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"col col-md-auto mt-4"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{id:"cm",type:"button"},on:{click:function(a){return t.openOrderModal("new")}}},[t._v("模擬訂單")])]),s("div",{staticClass:"col-1 mt-3"},[s("a",{staticClass:"navbar-brand text-dark",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getCartList()}}},[s("i",{staticClass:"fas fa-shopping-cart fa-2x"}),s("span",{staticClass:"badge badge-light badge-wrapper",staticStyle:{"font-size":"24px",color:"red"}},[t._v(t._s(t.quantity))])])])]),s("hr"),s("div",{staticClass:"row mt-4"},t._l(t.products,(function(a){return s("div",{key:a.id,staticClass:"col-md-4 mb-4"},[s("div",{staticClass:"card border-0 shadow-sm"},[s("div",[s("a",{staticClass:"text-decoration-none text-secondary",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.getDetailed(a.id)}}},[s("div",{staticStyle:{height:"300px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl[0]+")"}})]),s("div",{staticClass:"card-body"},[s("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),s("h5",{staticClass:"card-title"},[t._v(t._s(a.title))]),s("p",{staticClass:"card-text",domProps:{innerHTML:t._s(a.content)}},[t._v(t._s(a.content))]),s("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.price?s("div",[s("del",{staticClass:"h6 text-secondary"},[t._v("原價 "+t._s(a.origin_price)+" 元")]),s("h5",{staticClass:"text-danger",staticStyle:{display:"inline",position:"absolute",right:"80px"}},[t._v(" 特價 "+t._s(a.price)+" 元 ")])]):s("div",{staticClass:"h5"},[t._v(" "+t._s(a.origin_price)+" 元 ")])])]),s("div",{staticClass:"card-footer d-flex"},[s("button",{staticClass:"btn btn-outline-dark btn-sm ml-auto",staticStyle:{width:"100%"},attrs:{type:"button",disabled:t.status.loadingItem===a.id},on:{click:function(s){return t.addToCart(a)}}},[!0===t.status.isLoading&&t.status.loadingItem===a.id?s("i",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t._v(" 加到購物車 ")])])])])])})),0),s("Pagination",{attrs:{pages:t.pagination},on:{emitPage:t.getCustomerPros}}),s("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.tempProduct.title)+" ")]),t._m(1)]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleControls","data-ride":"carousel"}},[s("div",{staticClass:"carousel-inner"},t._l(t.tempProduct.imageUrl,(function(t){return s("div",{key:t,staticClass:"carousel-item active"},[s("img",{staticClass:"img-fluid",attrs:{src:t,alt:""}})])})),0),t._m(2),t._m(3)]),s("p",{staticClass:"font-weight-bold",domProps:{innerHTML:t._s(t.tempProduct.content)}}),s("p",{staticClass:"font-weight-light text-right"},[t._v(" - "+t._s(t.tempProduct.description))]),s("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.tempProduct.price?t._e():s("div",{staticClass:"h4 text-left"},[t._v(" NT."+t._s(t.tempProduct.origin_price)+" ")]),t.tempProduct.price?s("del",{staticClass:"h5 text-left",staticStyle:{width:"20%"}},[t._v(" NT."+t._s(t.tempProduct.origin_price))]):t._e(),t.tempProduct.price?s("div",{staticClass:"h4 text-danger text-left",staticStyle:{width:"80%"}},[t._v(" 特價 NT."+t._s(t.tempProduct.price)+" ")]):t._e()]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.num,expression:"tempProduct.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.tempProduct,"num",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v(" 請選擇數量 ")]),t._l(10,(function(a){return s("option",{key:a,domProps:{value:a}},[t._v(" 選購 "+t._s(a)+" "+t._s(t.tempProduct.unit)+" ")])}))],2)]),s("div",{staticClass:"modal-footer"},[t.tempProduct.num?s("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v(" 小計 "),s("strong",[t._v(t._s(t.tempProduct.num*t.tempProduct.price))]),t._v(" 元 ")]):t._e(),s("button",{staticClass:"btn btn-secondary ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addToCart(t.tempProduct,t.tempProduct.num)}}},[t.tempProduct.id===t.status.loadingItem?s("i",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t._v(" 加到購物車 ")])])])])]),s("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"cartModal",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[t._m(4),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"text-right mb-3"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeAllCartItem()}}},[s("i",{staticClass:"far fa-trash-alt"},[t._v(" 刪除所有品項")])])]),s("table",{staticClass:"table table-hover"},[t._m(5),t.cartProducts.length?s("tbody",t._l(t.cartProducts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(a.product,a.quantity)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(s){return t.quantityUpdata(a.product.id,a.quantity+1)}}},[t._v(" + ")])]),s("input",{staticClass:"form-control text-center",attrs:{id:"inlineFormInputGroupUsername",type:"text"},domProps:{value:a.quantity},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.quantityUpdata(a.product.id,s.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(s){return t.quantityUpdata(a.product.id,a.quantity-1)}}},[t._v(" - ")])])])]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.unit)+" ")]),s("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(a.product.price)+" ")])])})),0):t._e(),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v(" 總計 ")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t.cartTotal)+" ")])])])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("繼續購物")]),s("button",{staticClass:"btn btn-dark",attrs:{type:"button",disabled:0===t.cartTotal},on:{click:function(a){return t.orderForm()}}},[t._v("確認訂購")])])])])]),s("CartAdd"),s("CartAlready")],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col mt-3 info"},[s("h2",{staticClass:"mt-2 mb-5 font-weight-bold text-"},[t._v("模擬下單 產品列表")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleControls",role:"button","data-slide":"prev"}},[s("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"sr-only"},[t._v("Previous")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleControls",role:"button","data-slide":"next"}},[s("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"sr-only"},[t._v("Next")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("購物車")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("刪除")]),s("th",{attrs:{scope:"col"}},[t._v("品名")]),s("th",{attrs:{scope:"col",width:"150px"}},[t._v("數量")]),s("th",{attrs:{scope:"col"}},[t._v("單位")]),s("th",{attrs:{scope:"col"}},[t._v("單價")])])])}],n=(s("99af"),s("4160"),s("159b"),s("1799")),o=s("9e4f"),r=s("1cc9"),c={components:{Pagination:n["a"],CartAlready:r["a"],CartAdd:o["a"]},data:function(){return{isLoading:!1,products:[],pagination:{},tempProduct:{imageUrl:[]},quantity:0,cartProducts:{},cartTotal:0,uuid:"7f1638b3-f468-4c9d-a7b1-49b0ae75cd3d",path:"https://course-ec-api.hexschool.io/api/",status:{isLoading:!1,loadingItem:""}}},methods:{orderForm:function(){},getDetailed:function(t){var a=this;this.isLoading=!0,this.status.loadingItem=t;var s="".concat(this.path).concat(this.uuid,"/ec/product/").concat(t);this.$http.get(s).then((function(t){a.tempProduct=Object.assign(t.data.data),a.$set(a.tempProduct,"num",0),a.status.loadingItem="",a.isLoading=!1,$("#productModal").modal("show")})).catch((function(t){a.isLoading=!1,a.status.loadingItem="",console.log(t)}))},addToCart:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.isLoading=!0,this.status.loadingItem=t.id;var e="".concat(this.path).concat(this.uuid,"/ec/shopping"),i={product:t.id,quantity:s};console.log(i.quantity),this.$http.post(e,i).then((function(){$("#cartAdd").modal("show"),$("#productModal").modal("hide"),a.status.loadingItem="",a.quantity+=i.quantity,a.status.isLoading=!1})).catch((function(t){$("#cartAlready").modal("show"),$("#productModal").modal("hide"),a.status.loadingItem="",console.log(t.response.data.errors),a.status.isLoading=!1}))},getCartList:function(){var t=this;this.isLoading=!0;var a="".concat(this.path).concat(this.uuid,"/ec/shopping");this.$http.get(a).then((function(a){t.cartProducts=a.data.data,t.isLoading=!1,t.cartTotal=0,t.cartProducts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity})),$("#cartModal").modal("show")})).catch((function(a){t.isLoading=!1,t.$bus.$emit("message:push","購物車載入失敗，".concat(a),"danger")}))},removeAllCartItem:function(){var t=this;this.isLoading=!0,this.cartProducts=[],this.cartTotal=0;var a="".concat(this.path).concat(this.uuid,"/ec/shopping/all/product");this.$http.delete(a).then((function(){t.isLoading=!1,$("#cartModal").modal("show")})).catch((function(a){t.isLoading=!1,t.$bus.$emit("message:push","刪除失敗，".concat(a),"danger")})),this.quantity=0},removeCartItem:function(t){var a=this;this.isLoading=!0;var s="".concat(this.path).concat(this.uuid,"/ec/shopping/").concat(t.id);this.$http.delete(s).then((function(){a.isLoading=!1,a.getCartNum(),a.getCartList()})).catch((function(t){a.isLoading=!1,a.$bus.$emit("message:push","刪除失敗，".concat(t),"danger")}))},quantityUpdata:function(t,a){var s=this;this.isLoading=!0;var e="".concat(this.path).concat(this.uuid,"/ec/shopping"),i={product:t,quantity:a};this.$http.patch(e,i).then((function(){s.isLoading=!1,s.getCartList(),s.getCartNum()}))},getCartNum:function(){var t=this,a="".concat(this.path).concat(this.uuid,"/ec/shopping");this.quantity=0,this.$http.get(a).then((function(a){t.cartProducts=a.data.data,t.cartProducts.forEach((function(a){t.quantity+=a.quantity}))}))},getCustomerPros:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat(this.path).concat(this.uuid,"/ec/products?page=").concat(a)).then((function(a){t.isLoading=!1,t.products=a.data.data,t.pagination=a.data.meta.pagination,t.$bus.$emit("message:push","載入成功","success")})).catch((function(a){t.isLoading=!1,t.$bus.$emit("message:push","載入失敗，".concat(a),"danger")}))}},created:function(){this.getCustomerPros(),this.getCartNum()}},l=c,d=s("2877"),u=Object(d["a"])(l,e,i,!1,null,null,null);a["default"]=u.exports},"99af":function(t,a,s){"use strict";var e=s("23e7"),i=s("d039"),n=s("e8b5"),o=s("861d"),r=s("7b0b"),c=s("50c4"),l=s("8418"),d=s("65f0"),u=s("1dde"),p=s("b622"),m=s("2d00"),h=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",f=m>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),C=u("concat"),b=function(t){if(!o(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},_=!f||!C;e({target:"Array",proto:!0,forced:_},{concat:function(t){var a,s,e,i,n,o=r(this),u=d(o,0),p=0;for(a=-1,e=arguments.length;a<e;a++)if(n=-1===a?o:arguments[a],b(n)){if(i=c(n.length),p+i>g)throw TypeError(v);for(s=0;s<i;s++,p++)s in n&&l(u,p,n[s])}else{if(p>=g)throw TypeError(v);l(u,p++,n)}return u.length=p,u}})}}]);
//# sourceMappingURL=chunk-753b141c.18acc4bf.js.map